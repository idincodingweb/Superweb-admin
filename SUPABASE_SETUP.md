# Langkah-langkah Setup Database Supabase

## 1. Membuat Akun dan Project

1. Kunjungi [supabase.com](https://supabase.com)
2. Klik "Start your project"
3. Login menggunakan GitHub atau email
4. Buat project baru:
   - Beri nama project
   - Set password database
   - Pilih region terdekat
   - Klik "Create new project"

## 2. Membuat Tabel Database

### Tabel 'posts'
1. Buka menu "Table Editor"
2. Klik "New Table"
3. Buat tabel dengan nama "posts" dan kolom berikut:
```sql
id: bigint (primary key, generated by default as identity)
title: text
content: text
category: text
image_url: text
created_at: timestamp with time zone (default: now())
views: bigint (default: 0)
```

### Tabel 'comments'
1. Buat tabel baru dengan nama "comments":
```sql
id: bigint (primary key, generated by default as identity)
post_id: bigint (foreign key references posts.id)
author: text
content: text
created_at: timestamp with time zone (default: now())
```

### Tabel 'post_views'
1. Buat tabel baru dengan nama "post_views":
```sql
id: bigint (primary key, generated by default as identity)
post_id: bigint (foreign key references posts.id)
date: date
views: bigint
```

## 3. Konfigurasi Authentication

1. Buka menu "Authentication"
2. Di tab "Providers", aktifkan "Email"
3. Konfigurasi email provider:
   - Disable "Confirm email"
   - Enable "Double confirm password"

## 4. Setup Row Level Security (RLS)

1. Untuk setiap tabel, aktifkan RLS:
   - Klik tabel
   - Tab "Authentication"
   - Enable RLS

2. Tambahkan policies berikut:

### Posts Table Policies:
```sql
-- Allow read access for everyone
CREATE POLICY "Enable read access for all users" ON "public"."posts"
FOR SELECT USING (true);

-- Allow insert/update/delete for authenticated users only
CREATE POLICY "Enable insert for authenticated users only" ON "public"."posts"
FOR INSERT WITH CHECK (auth.role() = 'authenticated');

CREATE POLICY "Enable update for authenticated users only" ON "public"."posts"
FOR UPDATE USING (auth.role() = 'authenticated');

CREATE POLICY "Enable delete for authenticated users only" ON "public"."posts"
FOR DELETE USING (auth.role() = 'authenticated');
```

### Comments Table Policies:
```sql
-- Allow read access for everyone
CREATE POLICY "Enable read access for all users" ON "public"."comments"
FOR SELECT USING (true);

-- Allow insert for everyone
CREATE POLICY "Enable insert for all users" ON "public"."comments"
FOR INSERT WITH CHECK (true);
```

## 5. Mendapatkan Credentials

1. Buka menu "Project Settings"
2. Cari bagian "API"
3. Salin credentials berikut:
   - Project URL
   - anon/public key

## 6. Update Aplikasi

1. Buka file `src/lib/supabase.ts`
2. Update dengan credentials yang didapat:
```typescript
const supabaseUrl = 'YOUR_PROJECT_URL';
const supabaseKey = 'YOUR_ANON_KEY';
```

## 7. Pengujian

1. Buat admin user:
   - Buka Authentication > Users
   - Invite new user
   - Masukkan email dan password
2. Test login dengan credentials tersebut
3. Coba membuat post baru
4. Verifikasi bahwa post muncul di halaman utama

## Tips Keamanan

1. Jangan pernah share service_role key
2. Gunakan environment variables untuk menyimpan credentials
3. Selalu gunakan RLS policies
4. Backup database secara berkala
5. Monitor usage melalui dashboard Supabase

## Troubleshooting

Jika mengalami masalah:
1. Periksa RLS policies
2. Periksa network requests di browser developer tools
3. Periksa Supabase logs di dashboard
4. Pastikan credentials sudah benar
5. Verifikasi koneksi database di aplikasi
